

<!-- Karte -->
<div id="map"></div>
<div class="loading-overlay" *ngIf="isLoading">
  <div class="loading-spinner"></div>
</div>
<app-navbar></app-navbar>
<app-ai-toolbar
  [map]="map"
  [selectedLocations]="selectedLocations"
  [allMarkers]="allMarkers"
  [removedMarkersStack]="removedMarkersStack"
  [mode]="toolbarMode"
  (mainAction)="handleMainAction()">
</app-ai-toolbar>

<!-- Hilfe-Overlay -->
<div class="map-overlay" *ngIf="infoVisible">
  <h4>Tipps zur Bedienung</h4>
  <ul>
    <li>Linksklick:   <span class="color-dot red"></span> besucht</li>
    <li>Rechtsklick:  <span class="color-dot violet"></span> Wunschliste</li>
    <li>Klicke auf Marker zum Entfernen</li>
    <li>Empfehlungen: <span class="color-dot yellow"></span> sicher,
      <span class="color-dot blue"></span> experimentell,
      <span class="color-dot green"></span> Geheimtipp</li>
    <li>Bei der Legende können Marker ein-/ausgeblendet werden</li>
    <li>🗑️ alles löschen, ↩️ letzter Marker zurück, 🏠 Startansicht</li>
  </ul>
  <button (click)="closeInfo()">OK</button>
</div>

<!-- Hilfe-Toggle-Button -->
<div class="info-toggle" (click)="toggleInfo()">Hilfe</div>

<!-- Legenden-Toggle-Button -->
<div class="legend-toggle" (click)="toggleLegend()">Legende</div>

<!-- Legenden-Box -->
<div class="legend-box" [class.visible]="legendVisible">
  <h4>Marker anzeigen:</h4>
  <ul>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.safe" (change)="toggleMarkerVisibility('safe')" />
        🟡 Safe
      </label>
    </li>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.experimental" (change)="toggleMarkerVisibility('experimental')" />
        🔵 Experimental
      </label>
    </li>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.hidden" (change)="toggleMarkerVisibility('hidden')" />
        🟢 Geheimtipp
      </label>
    </li>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.wishlist" (change)="toggleMarkerVisibility('wishlist')" />
        🟣 Wunschliste
      </label>
    </li>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.airport" (change)="toggleMarkerVisibility('airport')" />
        🟠 Flughäfen
      </label>
    </li>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.user" (change)="toggleMarkerVisibility('user')" />
        🔴 Besucht
      </label>
    </li>
  </ul>
</div>