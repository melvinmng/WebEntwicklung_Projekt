<div class="navbar" [class.visible]="navbarVisible" (mouseenter)="showNavbar()" (mouseleave)="startNavbarFadeTimer()">
  <div class="navbar-group">
    <!-- Empfehlungsbutton mit integriertem Dropdown-Pfeil -->
    <div class="recommendation-button-wrapper">
      <button (click)="generateRecommendations()" [disabled]="isLoading">
        <span>Empfehlungen generieren</span>
        <span *ngIf="isLoading" class="loading-spinner"></span>
        <span 
          *ngIf="recommendationsList.length > 0" 
          class="dropdown-icon" 
          (click)="toggleDropdown($event)">
          â–¼
        </span>
      </button>

      <div class="recommendation-dropdown" *ngIf="dropdownOpen">
        <ul>
          <li 
            *ngFor="let rec of recommendationsList" 
            (click)="flyToRecommendation(rec)">
            {{ rec.type }}: {{ rec.city }}, {{ rec.country }}
          </li>
        </ul>
      </div>
    </div>

    
    <select (change)="flyToLocation($event)">
      <option disabled selected>Ort auswÃ¤hlen...</option>
      <option 
        *ngFor="let loc of getAllDropdownLocations(); let i = index" 
        [value]="i">
        {{ loc.label }}
      </option>
    </select>

    <input 
      type="text" 
      [(ngModel)]="searchQuery" 
      placeholder="Stadt, Land suchen..." 
      (keydown.enter)="searchAndAddMarker()" 
      class="search-input"
    />
  </div>
</div>
<!-- Karte -->
<div id="map"></div>


<!-- Legenden-Toggle-Button -->
<div class="legend-toggle" (click)="toggleLegend()">Legende</div>

<!-- Legenden-Box -->
<div class="legend-box" [class.visible]="legendVisible">
  <h4>Marker anzeigen:</h4>
  <ul>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.safe" (change)="toggleMarkerVisibility('safe')" />
        ğŸŸ¡ Safe
      </label>
    </li>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.experimental" (change)="toggleMarkerVisibility('experimental')" />
        ğŸ”µ Experimental
      </label>
    </li>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.hidden" (change)="toggleMarkerVisibility('hidden')" />
        ğŸŸ¢ Geheimtipp
      </label>
    </li>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.wishlist" (change)="toggleMarkerVisibility('wishlist')" />
        ğŸŸ£ Wunschliste
      </label>
    </li>
    <li>
      <label>
        <input type="checkbox" [checked]="markerVisibility.user" (change)="toggleMarkerVisibility('user')" />
        ğŸ”´ Besucht
      </label>
    </li>
  </ul>
</div>
